<!DOCTYPE html>
<html>
	<head>
		<meta charset=utf-8>
		<title>Elaborato Computer Graphics and 3D</title>

		<style>
			body { margin: 0; }
			canvas { width: 100%; height: 100% }
		</style>

		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		<script src= "dat.gui.min.js"></script>

	</head>
	<body>
		<script type="x-shader/x-vertex" id="vertex_particles">
			
			attribute vec3 movements;

			varying vec3 vUv;
			uniform float t;
			uniform sampler2D texture_sampler;
	
			void main()
			{	
				
				float theta = movements.y;
				float v0r = movements.x;
				float v0y = movements.z;
				
				float v0x = movements.x*cos(theta);
				float v0z = movements.x*sin(theta);
				
				vec3 p = position;				
				
				p.x += v0x*t;
				p.y += -0.5*3.0*t*t+v0y*t;
				p.z += v0z*t;
				
				if(p.y < -1.0){
					p.x = -0.1;
					p.y = -0.1;
					p.z = -0.1;
				} 
				
				vec4 mvPosition = modelViewMatrix * vec4( p, 1.0 );
				gl_PointSize = 10.0 * ( 300.0 / -mvPosition.z );
				gl_Position = projectionMatrix * mvPosition;
				
				vUv = position ;

			}
			
		</script>
		
		<script type="x-shader/x-fragment" id="fragment_particles">
			
			uniform sampler2D texture_sampler;
			
			void main()
			{	
				gl_FragColor = texture2D(texture_sampler, gl_PointCoord);
				gl_FragColor.a = 0.99;
				
			}
			
		</script>
		
		<script src="three.js"></script>
		<script src="water.js"></script>
		<script src="orbit_controls.js"></script>
		<script src="context.js"></script>
		<script src="create_particles.js"></script>
		<script src="render.js"></script>
	</body>
</html>